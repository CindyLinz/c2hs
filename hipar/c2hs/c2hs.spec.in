# RPM spec file for C->Haskell                                   -*-rpm-spec-*-
#
# Copyright [1999..2002] Manuel M T Chakravarty <chak@cse.unsw.edu.au>

Summary: C->Haskell Interface Generator
Name: c2hs
Version: @C2HS_VERSION@
Release: SNAP
Copyright: GPL
Group: Development/Tools
Source: http://www.cse.unsw.edu.au/~chak/haskell/c2hs/c2hs-%{version}.tar.gz
URL: http://www.cse.unsw.edu.au/~chak/haskell/c2hs/
BuildRoot: /var/tmp/c2hs-%{version}-%{release}-root
Packager: Manuel M T Chakravarty <chak@cse.unsw.edu.au>
Requires: @REQUIRES_HASKELL@
Provides: c2hs

%description
C->Haskell is an interface generator that simplifies the development
of Haskell bindings to C libraries.  The tool processes existing C
header files that determine data layout and function signatures on the
C side in conjunction with Haskell modules that specify Haskell-side
type signatures and marshaling details.  Hooks embedded in the Haskell
code signal access to C structures and functions -- they are expanded
by the interfacing tool in dependence on information from the
corresponding C header file.

Haskell 98 is "the" standard lazy functional programming language.
More info plus the language definition is at http://www.haskell.org/.


%changelog

* Sat Sep 7 2002 Manuel Chakravarty
- add post install and uninstall scripts to register and deregister the 
  package with GHC
- fixed docu packaging

* Tue Mar 12 2002 Manuel Chakravarty
- require a specific Haskell compiler (namely, the one for which the packages 
  was compiled)

* Sun Oct 31 1999 Manuel Chakravarty
- original version

%prep
%setup -q

%build
%configure
make
make doc

%install
%makeinstall install-doc

%clean
rm -rf $RPM_BUILD_ROOT

%post
%{_bindir}/c2hs-config --package-conf\
  | ghc-pkg --update-package --auto-ghci-libs

%postun
ghc-pkg --remove-package=c2hs

%files
%defattr(-,root,root)
%doc c2hs/ChangeLog c2hs/TODO c2hs/COPYING c2hs/COPYING.LIB
%doc c2hs/README c2hs/AUTHORS
%doc doc/c2hs/*.html doc/c2hs/*.txt doc/c2hs/lib c2hs/tests
%{_bindir}/c2hs
%{_bindir}/c2hs-config
%{_libdir}/c2hs-%{version}/
%{_mandir}/man1/*
